<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>VaF'i'T • Prstenec se sloty</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      body {
        /* pozadí jako u koule – tmavý vesmír */
        background:
          radial-gradient(circle at top, #131726 0, #05070c 45%, #020208 100%);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: #f5f5f5;
      }

      .root {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px;
        box-sizing: border-box;
      }

      .card {
        position: relative;
        width: min(90vw, 700px);
        height: min(90vh, 700px);
        border-radius: 32px;
        background: radial-gradient(circle at top, #050815, #020208);
        box-shadow: 0 32px 80px rgba(0, 0, 0, 0.85);
        overflow: hidden;
      }

      .card-header {
        position: absolute;
        top: 16px;
        right: 22px;
        font-size: 11px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.5);
        pointer-events: none;
        user-select: none;
      }

      .hint {
        position: absolute;
        left: 24px;
        bottom: 18px;
        font-size: 11px;
        color: rgba(178, 198, 255, 0.7);
        display: flex;
        align-items: center;
        gap: 6px;
        user-select: none;
        pointer-events: none;
      }

      .hint-dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background: #4a7dff;
        box-shadow: 0 0 12px rgba(74, 125, 255, 0.9);
      }

      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="root">
      <div class="card">
        <div class="card-header">v0.3 • prstenec se světy</div>
        <div class="hint">
          <div class="hint-dot"></div>
          otáčej prstenec prstem / myší • přiblíž/oddal pro detail slotů
        </div>
      </div>
    </div>

    <!-- THREE.JS Z CDN (globální THREE) -->
    <script src="https://unpkg.com/three@0.161.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.161.0/examples/js/controls/OrbitControls.js"></script>

    <script>
      const card = document.querySelector(".card");

      // SCÉNA
      const scene = new THREE.Scene();

      // KAMERA
      const camera = new THREE.PerspectiveCamera(
        38,
        card.clientWidth / card.clientHeight,
        0.1,
        100
      );
      camera.position.set(0, 0.3, 9);

      // RENDERER
      const renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
      });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.setSize(card.clientWidth, card.clientHeight);
      card.appendChild(renderer.domElement);

      // SVĚTLO "AURA"
      const glowLight = new THREE.PointLight(0xffe2aa, 2.5, 25);
      glowLight.position.set(0, 2, 6);
      scene.add(glowLight);

      const rimLight = new THREE.PointLight(0xffb156, 1.5, 18);
      rimLight.position.set(0, -3, -4);
      scene.add(rimLight);

      // BARVY
      const GOLD = 0xffd27f;
      const GOLD_SOFT = 0xffb156;

      // HLAVNÍ PRSTENEC (TORUS + ELLIPTICKÉ ŠKÁLOVÁNÍ)
      const ringRadius = 2.4; // poloměr prstence
      const tubeRadius = 0.7; // tloušťka "těla"
      const radialSegments = 18; // počet dělení kolem dokola (čtverečky)
      const tubularSegments = 48; // dělení uvnitř – hustota mřížky

      const ringGeometry = new THREE.TorusGeometry(
        ringRadius,
        tubeRadius,
        radialSegments,
        tubularSegments
      );

      // materiál s mřížkou (wireframe)
      const ringMaterial = new THREE.MeshBasicMaterial({
        color: GOLD,
        wireframe: true,
      });

      const ring = new THREE.Mesh(ringGeometry, ringMaterial);

      // uděláme z toho "elipsu" – protáhnutí podle náčrtu
      ring.scale.set(1.2, 1.3, 0.9);

      // náklon, aby byl podobný kouli na screenshotu
      ring.rotation.x = Math.PI * 0.42;
      ring.rotation.y = Math.PI * 0.15;

      scene.add(ring);

      // JEMNÁ AURA OKOLO PRSTENCE (průhledná vrstva)
      const glowGeometry = ringGeometry.clone();
      const glowMaterial = new THREE.MeshBasicMaterial({
        color: GOLD_SOFT,
        transparent: true,
        opacity: 0.12,
      });
      const glow = new THREE.Mesh(glowGeometry, glowMaterial);
      glow.scale.multiplyScalar(1.06);
      glow.rotation.copy(ring.rotation);
      scene.add(glow);

      // MINI "SLOT BODY" – budoucí místa pro appky (jen naznačíme)
      // tady pak můžeš později nahradit skutečnými moduly/apkami
      const slotMaterial = new THREE.MeshBasicMaterial({
        color: GOLD,
        wireframe: true,
      });

      const slotGeometry = new THREE.BoxGeometry(0.4, 0.4, 0.06);

      function createSlot(angle) {
        const slot = new THREE.Mesh(slotGeometry, slotMaterial.clone());

        // pozice na prstenci podél jeho vnějšího okraje
        const r = ringRadius + tubeRadius * 0.4;
        slot.position.set(
          Math.cos(angle) * r,
          0,
          Math.sin(angle) * r
        );

        // natočení tak, aby čtvereček "sledoval" křivku
        slot.lookAt(0, 0, 0);
        slot.rotateY(Math.PI); // aby byl lícem ven

        ring.add(slot);
        return slot;
      }

      // jen pár slotů pro ukázku (můžeš přidat víc)
      const slots = [
        createSlot(0),
        createSlot(Math.PI / 2.8),
        createSlot(-Math.PI / 2.8),
        createSlot(Math.PI),
      ];

      // KONTROLY – OTÁČENÍ PRSTEM / MYŠÍ
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.08;
      controls.enablePan = false;
      controls.minDistance = 5;
      controls.maxDistance = 13;

      // ANIMACE
      function animate() {
        requestAnimationFrame(animate);

        // jemné vlastní otáčení – živost
        ring.rotation.y += 0.003;
        glow.rotation.y += 0.003;

        controls.update();
        renderer.render(scene, camera);
      }
      animate();

      // REZIZE – iPhone 14 / iPad
      function onResize() {
        const w = card.clientWidth;
        const h = card.clientHeight;
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
        renderer.setSize(w, h);
      }

      window.addEventListener("resize", onResize);
      onResize();
    </script>
  </body>
</html>
