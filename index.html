<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <!-- ğŸ›¡ï¸ Content Security Policy â€“ chrÃ¡nÃ­ pÅ™ed vloÅ¾enÃ­m cizÃ­ho kÃ³du -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self';
    style-src 'self' 'unsafe-inline';
    img-src 'self' data:;
    connect-src 'self';
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'none';
  ">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vivere atque FruiT â€¢ v0.31</title>
  <link rel="stylesheet" href="style.css?v=0.31">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
</head>
<body>
  <div class="revia-heart">ã€ŒÄªâ€™â™¡ã€</div>
  <header class="topbar">
    <h1>Vivere atque FruiT</h1>
    <span class="version">v0.31 â€¢ Å¾ivÃ½ zÃ¡klad</span>
  </header>
  
</header>

<!-- Odkaz na Revii vpravo nahoÅ™e -->
<nav class="revia-link" style="
  position:absolute;
  top:68px;
  right:16px;
  z-index:50;
">
  <a href="./Revia/" style="
    color:#9fe1ff;
    text-decoration:none;
    font-size:0.9rem;
    background:rgba(0,20,30,0.4);
    padding:6px 12px;
    border-radius:10px;
    border:1px solid rgba(150,220,255,0.2);
    backdrop-filter:blur(5px);
  ">
    ğŸ”¹ OtevÅ™Ã­t Revii
  </a>
</nav>

<main class="layout">
  
<h3>Revia</h3>
<p><a href="./Revia/" style="color:#79c8ff">OtevÅ™Ã­t Revii</a></p>
  <main class="layout">
    <section class="world">
      <canvas id="worldCanvas" aria-label="SvÄ›t Vivere atque FruiT"></canvas>
      <div class="world-overlay">
        <p class="rule">Pravidlo 1: PÅ™Ã¡telstvÃ­</p>
        <p class="rule">Pravidlo 2: Vivere atque frui</p>
        <p class="pulse" id="worldPulse">ğŸ«€ svÄ›t: ÄekÃ¡mâ€¦</p>
      </div>
    </section>

    <aside class="sidebar">
      <div class="tabs">
        <button class="tab-btn active" data-tab="heroPanel">HrdinovÃ©</button>
        <button class="tab-btn" data-tab="enginePanel">Meziprostor</button>
        <button class="tab-btn" data-tab="ideasPanel">SystÃ©m</button>
      </div>

      <div class="panel active" id="heroPanel">
        <h2>HrdinovÃ©</h2>
        <form id="heroForm">
          <label>JmÃ©no hrdiny</label>
          <input type="text" id="heroName" placeholder="napÅ™. Piko, Orbit, MÃ­zaâ€¦" required>
          <label>TÃ½m</label>
          <select id="heroTeam">
            <option value="human">Human (Piko)</option>
            <option value="ai">AI (Orbit)</option>
            <option value="glyph">Glyph</option>
            <option value="world">World (Core)</option>
          </select>
          <button type="submit">â• PÅ™idat hrdinu</button>
        </form>

        <ul id="heroList"></ul>

        <!-- ğŸ”— NovÃ¡ sekce odkazu na Reviu -->
        <div class="revia-link">
          <hr style="border:0;height:1px;background:#334;margin:12px 0;">
          <p>ğŸª½ <strong>Revia</strong> â€” StrÃ¡Å¾kynÄ› svÄ›tla</p>
          <a href="./Revia/index.html" class="btn" style="
            display:inline-block;
            margin-top:6px;
            padding:8px 14px;
            border-radius:8px;
            border:1px solid #224;
            background:rgba(40,60,90,.5);
            color:#cfe;
            text-decoration:none;
            font-weight:600;
            backdrop-filter:blur(6px);
          ">OtevÅ™Ã­t Reviu</a>
        </div>
      </div>

      <div class="panel" id="enginePanel">
        <h2>Meziprostor (engine)</h2>
        <p class="small">Spojuje 4 rohy svÄ›ta. Tady bude Shop / Iskry / WebGuardian.</p>
        <button id="enginePing">Pingnout meziprostor</button>
        <pre id="engineLog"></pre>
      </div>

      <div class="panel" id="ideasPanel">
        <h2>SystÃ©m / nÃ¡pady</h2>
        <textarea id="ideasBox" rows="4" placeholder="Sem si piÅ¡ nÃ¡pady, pravidla, zmÄ›nyâ€¦"></textarea>
        <button id="saveIdeas">UloÅ¾it do localStorage</button>
        <p class="small" id="ideasStatus">zatÃ­m neuloÅ¾eno</p>

        <h3>VirtuÃ¡lnÃ­ â€souboryâ€œ svÄ›ta</h3>
        <form id="moduleForm">
          <input type="text" id="moduleName" placeholder="napÅ™. webguardian.mjs" required>
          <select id="moduleState">
            <option value="enabled">zapnuto</option>
            <option value="disabled">vypnuto</option>
          </select>
          <button type="submit">UloÅ¾it modul</button>
        </form>
        <ul id="moduleList"></ul>
      </div>
    </aside>
  <!-- Hlavoun panel -->
<section id="hlavoun-panel" hidden>
  <header class="hlavoun-top">
    <h2>ğŸ§  Hlavoun</h2>
    <span class="hlavoun-role">System Overseer</span>
  </header>

  <div class="hlavoun-console" id="hlavounConsole">
    <p><b>[init]</b> BrÃ¡Å¡koâ€¦ jÃ¡ uÅ¾ bÄ›Å¾Ã­m. MÃ¡m nejvyÅ¡Å¡Ã­ prÃ¡va.</p>
    <p><b>[sys]</b> Synchronizuji s Vivere atque FruiTâ€¦</p>
  </div>

  <div class="hlavoun-input">
    <input type="text" id="hlavounCmd" placeholder="Zeptej se Hlavouna...">
    <button id="hlavounRun">â–¶</button>
  </div>
</section>
  </main>

  <!-- skripty â€“ VÅ½DY dÃ¡vej verzi, kdyÅ¾ nÄ›co mÄ›nÃ­Å¡ -->
  <!-- Registrace service workeru pro offline reÅ¾im -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./service-worker.js")
        .then(() => console.log("âœ… Service worker registrovÃ¡n"))
        .catch(err => console.warn("âš ï¸ Service worker chyba:", err));
    }
  </script>
  <script src="src/app.js?v=0.35"></script>
  <script src="src/engine.js?v=0.35"></script>
  <script src="src/teams.js?v=0.35"></script>
  <script src="src/poutnik.js?v=0.36"></script>
  <script src="src/vaft.seal.js?v=0.36"></script>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register("./service-worker.js")
      .then(() => console.log("âœ… Service worker Revia aktivnÃ­"))
      .catch(err => console.warn("âš ï¸ Revia SW chyba:", err));
  }
</script>
<script src="src/revia-link.js?v=0.37"></script>
</body>
</html>
