<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Revia ‚Ä¢ Vivere atque FruiT</title>

    <link rel="stylesheet" href="./revia.css?v=0.6" />

    <style>
      /* pozad√≠ Revia angel / daemon */
      body {
        background-size: auto 70vh;
        background-position: center 18vh;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-color: #000;
      }
      @media (max-height: 820px) {
        body {
          background-size: auto 68vh;
          background-position: center 20vh;
        }
      }
      @media (min-height: 900px) {
        body {
          background-size: auto 78vh;
          background-position: center 15vh;
        }
      }
      @media (max-width: 480px) {
        body {
          background-size: auto 88vh;
          background-position: center 0;
        }
      }

      /* schovat p≈Øvodn√≠ z√°mek, ale nechat ho v DOM kv≈Øli JS */
      .revia-enter {
        display: none;
      }
    </style>
  </head>

  <body>
    <!-- hlavn√≠ Revia wrapper ‚Äì re≈æim angel / daemon -->
    <div class="revia-main" data-mode="angel" data-control="ai">
      <!-- horn√≠ li≈°ta -->
      <div class="revia-topbar">
        <button
          class="revia-wing"
          id="revWing"
          aria-label="otev≈ô√≠t z√°pisn√≠k"
        ></button>
        <div class="revia-title">Revia</div>
        <div class="revia-state" id="revState">AI: hl√≠d√°m svƒõt</div>
      </div>

      <!-- z√°pisn√≠k / k≈ô√≠dlo -->
      <div class="revia-notes" id="revNotes">
        <div class="notes-head">
          <span>‚úß K≈ô√≠dlo / z√°pis</span>
          <button id="notesClose" type="button">√ó</button>
        </div>
        <textarea
          id="notesText"
          placeholder="Charakter, √∫koly, komu se uk√°≈æe‚Ä¶"
        ></textarea>
        <p class="notes-foot">Ukl√°d√° se jen do tohoto za≈ô√≠zen√≠.</p>
      </div>

      <!-- m≈ô√≠≈æka dovednost√≠ -->
      <div class="revia-card">
        <!-- Skill 1: Centrum / Revia & Centrum -->
        <button class="revia-slot active" id="revSkillCentrum" type="button">
          <span class="revia-glyph">&„Äç</span>
        </button>

        <!-- Skill 2: p≈ôepnout re≈æim (andƒõl / d√©mon) -->
        <button class="revia-slot" id="revSkillToggle" type="button">
          <span class="revia-glyph">‚áÑ</span>
        </button>

        <!-- Skill 3: otoƒçit svƒõt (intern√≠ rotace Revia) -->
        <button class="revia-slot" id="revSkillRotate" type="button">
          <span class="revia-glyph">‚ü≥</span>
        </button>

        <!-- zbyl√© 3 sloty zat√≠m pr√°zdn√© pro budouc√≠ skilly -->
        <button class="revia-slot" type="button"></button>
        <button class="revia-slot" type="button"></button>
        <button class="revia-slot" type="button"></button>
      </div>

      <!-- spodn√≠ panel (ponech√°n kv≈Øli JS, z√°mek schovan√Ω CSS) -->
      <div class="revia-bottom">
        <div class="revia-mini">ƒ™‚Äô‚ô°</div>
        <button class="revia-enter" id="revEnter" type="button">
          üîí Vstoupit
        </button>
        <button class="revia-toggle" id="revToggle" type="button">
          üîÅ P≈ôepnout
        </button>
        <button class="revia-help" id="revHelp" type="button">?</button>
      </div>

      <div class="revia-toast" id="revToast" aria-live="polite"></div>
    </div>

    <!-- Revia rotace svƒõta (dovnit≈ô dat-world) -->
    <script>
      const REV_WORLD_STATES = ["vafiti", "glyph", "engine"];
      let revWorldIndex = 0;

      function reviaRotateWorld() {
        revWorldIndex = (revWorldIndex + 1) % REV_WORLD_STATES.length;
        const main = document.querySelector(".revia-main");
        if (!main) return;
        main.setAttribute("data-world", REV_WORLD_STATES[revWorldIndex]);
        console.log("Revia otoƒçila svƒõt na:", REV_WORLD_STATES[revWorldIndex]);
      }
    </script>

    <!-- hlavn√≠ Revia logika -->
    <script src="./revia.js?v=0.6"></script>
    <script src="../vaft-core.js"></script>

    <!-- napojen√≠ skill≈Ø na akce -->
    <script>
      (function () {
        // Skill 1 ‚Äì Centrum (Revia & Centrum index)
        const skillCentrum = document.getElementById("revSkillCentrum");
        if (skillCentrum) {
          skillCentrum.addEventListener("click", () => {
            window.location.href = "../index.html";
          });
        }

        // Skill 2 ‚Äì p≈ôepnout re≈æim (klikne na p≈Øvodn√≠ tlaƒç√≠tko revToggle)
        const skillToggle = document.getElementById("revSkillToggle");
        const btnToggle = document.getElementById("revToggle");
        if (skillToggle && btnToggle) {
          skillToggle.addEventListener("click", () => {
            btnToggle.click();
          });
        }

        // Skill 3 ‚Äì otoƒçit svƒõt (Revia rotace)
        const skillRotate = document.getElementById("revSkillRotate");
        if (skillRotate) {
          skillRotate.addEventListener("click", () => {
            reviaRotateWorld();
          });
        }
      })();
    </script>
  </body>
</html>
