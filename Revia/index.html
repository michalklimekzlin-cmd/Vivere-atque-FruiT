<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Revia ‚Ä¢ Vivere atque FruiT</title>

    <link rel="stylesheet" href="./revia.css?v=0.6">
    <style>
      body {
        background-size: auto 70vh;
        background-position: center 18vh;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-color: #000;
      }
      @media (max-height: 820px) {
        body { background-size: auto 68vh; background-position: center 20vh; }
      }
      @media (min-height: 900px) {
        body { background-size: auto 78vh; background-position: center 15vh; }
      }
      @media (max-width: 480px) {
        body { background-size: auto 88vh; background-position: center 0; }
      }

      /* Ÿã&‚Äô„Äç Revia avatar / postaviƒçka  */

      .revia-avatar {
        position: relative;
        max-width: 230px;
        margin: 14vh auto 2.4rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        pointer-events: none;
      }

      @media (max-width: 480px) {
        .revia-avatar {
          margin-top: 10vh;
          max-width: 200px;
        }
      }

      .revia-avatar-orbit {
        width: 100%;
        padding-top: 100%;
        border-radius: 999px;
        position: relative;
        box-shadow:
          0 0 30px rgba(255, 80, 150, 0.8),
          0 0 0 1px rgba(255, 180, 220, 0.7);
        background: radial-gradient(circle at 30% 20%, rgba(255, 230, 255, 0.18), rgba(0, 0, 0, 0.9));
        overflow: hidden;
      }

      .revia-avatar-core {
        position: absolute;
        inset: 18%;
        border-radius: 999px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        text-align: center;
        box-shadow:
          0 0 25px rgba(255, 120, 190, 0.9),
          0 0 0 1px rgba(255, 220, 240, 0.9);
      }

      .revia-avatar-glyph {
        opacity: 0.96;
      }

      .revia-avatar-ring {
        position: absolute;
        inset: 8%;
        border-radius: 999px;
        border: 1px dashed rgba(255, 150, 210, 0.65);
        animation: reviaOrbitKruh 12s linear infinite;
      }

      .revia-avatar-ring::before,
      .revia-avatar-ring::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 999px;
        top: 50%;
        transform: translateY(-50%);
        box-shadow: 0 0 14px rgba(255, 255, 255, 0.9);
      }

      .revia-avatar-ring::before {
        left: 2%;
      }
      .revia-avatar-ring::after {
        right: 2%;
      }

      .revia-avatar-label {
        margin-top: 0.7rem;
        text-align: center;
        font-size: 0.8rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        opacity: 0.9;
      }

      .revia-avatar-role {
        display: block;
        font-size: 0.7rem;
        opacity: 0.75;
        letter-spacing: 0.16em;
      }

      /* Angel / Daemon n√°lada podle data-mode na .revia-main */

      .revia-main[data-mode="angel"] .revia-avatar-core {
        background: radial-gradient(circle at 30% 20%, #ffffff, #e9ecff10, #000000);
        color: #fef9ff;
      }

      .revia-main[data-mode="angel"] .revia-avatar-orbit {
        box-shadow:
          0 0 32px rgba(90, 190, 255, 0.9),
          0 0 0 1px rgba(190, 240, 255, 0.8);
      }

      .revia-main[data-mode="daemon"] .revia-avatar-core {
        background: radial-gradient(circle at 20% 15%, #ffb7c4, #2a0008, #000000);
        color: #ffeef7;
      }

      .revia-main[data-mode="daemon"] .revia-avatar-orbit {
        box-shadow:
          0 0 36px rgba(255, 40, 90, 1),
          0 0 0 1px rgba(255, 140, 170, 0.9);
      }

      .revia-main[data-mode="daemon"] .revia-avatar-ring {
        border-color: rgba(255, 90, 120, 0.9);
      }

      @keyframes reviaOrbitKruh {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>

  <body>
    <div class="revia-main" data-mode="angel" data-control="ai" data-world="vafiti">
      
      <!-- horn√≠ li≈°ta -->
      <div class="revia-topbar">
        <button class="revia-wing" id="revWing" aria-label="otev≈ô√≠t z√°pisn√≠k"></button>
        <div class="revia-title">Revia</div>
        <div class="revia-state" id="revState">AI: hl√≠d√°m svƒõt</div>
      </div>

      <!-- z√°pisn√≠k -->
      <div class="revia-notes" id="revNotes">
        <div class="notes-head">
          <span>‚úß K≈ô√≠dlo / z√°pis</span>
          <button id="notesClose" type="button">√ó</button>
        </div>
        <textarea id="notesText" placeholder="Charakter, √∫koly, komu se uk√°≈æe‚Ä¶"></textarea>
        <p class="notes-foot">Ukl√°d√° se jen do tohoto za≈ô√≠zen√≠.</p>
      </div>

      <!-- postaviƒçka / avatar Revie -->
      <div class="revia-avatar" aria-hidden="true">
        <div class="revia-avatar-orbit">
          <div class="revia-avatar-ring"></div>
          <div class="revia-avatar-core">
            <span class="revia-avatar-glyph">„Äåƒ™‚Äô‚òÜ</span>
          </div>
        </div>
        <div class="revia-avatar-label">
          <span class="revia-avatar-name">Revia</span>
          <span class="revia-avatar-role">AI str√°≈æce svƒõta</span>
        </div>
      </div>

      <!-- m≈ô√≠≈æka slot≈Ø -->
      <div class="revia-card">
        <button class="revia-slot active" id="slot1" type="button">
          <span class="revia-glyph" id="slot1Glyph">„Äåƒ™‚Äô‚òÜ</span>
        </button>
        <button class="revia-slot" type="button"></button>
        <button class="revia-slot" type="button"></button>
        <button class="revia-slot" type="button"></button>
        <button class="revia-slot" type="button"></button>
        <button class="revia-slot" type="button"></button>
      </div>

      <!-- spodn√≠ panel -->
      <div class="revia-bottom">
        <div class="revia-mini">ƒ™‚Äô‚ô°</div>
        <button class="revia-enter" id="revEnter" type="button">üîí Vstoupit</button>
        <button class="revia-toggle" id="revToggle" type="button">üîÅ P≈ôepnout</button>
        <button class="revia-rotate" id="revRotate" type="button">üåÄ Otoƒçit svƒõt</button>
      </div>

      <div class="revia-toast" id="revToast" aria-live="polite"></div>
    </div>

    <!-- REVIA ROTATION MODULE -->
    <script>
      // ‚Ä¶iT‚Ä¶ jednoduch√° rotace t≈ô√≠ svƒõt≈Ø + mal√Ω toast od Revie

      const SVETY = ["vafiti", "glyph", "engine"];
      const SVETY_POPIS = {
        vafiti: "VaF'i'T ‚Äì svƒõt p√≠smenek",
        glyph: "Glyph ‚Äì k√≥d a symboly",
        engine: "Centrum ‚Äì motor svƒõta"
      };
      let aktualniSvet = 0;

      function reviaZobrazToast(zprava) {
        const toast = document.getElementById("revToast");
        if (!toast) return;

        toast.textContent = zprava;
        toast.classList.add("is-visible");

        clearTimeout(window.__revToastTimer);
        window.__revToastTimer = setTimeout(() => {
          toast.classList.remove("is-visible");
        }, 2200);
      }

      function reviaOtocSvet() {
        aktualniSvet = (aktualniSvet + 1) % SVETY.length;
        const novySvet = SVETY[aktualniSvet];

        console.log("Revia otoƒçila svƒõt na:", novySvet);
        document.body.setAttribute("data-world", novySvet);

        const root = document.querySelector(".revia-main");
        if (root) {
          root.setAttribute("data-world", novySvet);
        }

        const popis = SVETY_POPIS[novySvet] || novySvet;
        reviaZobrazToast("Otoƒçeno na: " + popis);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const tlacitkoOtoc = document.getElementById("revRotate");
        if (tlacitkoOtoc) {
          tlacitkoOtoc.addEventListener("click", reviaOtocSvet);
        }
      });
    </script>

    <script src="./revia.js?v=0.6"></script>
    <script src="../vaft-core.js"></script>
  </body>
</html>
