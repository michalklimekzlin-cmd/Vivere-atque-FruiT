<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VaF'i'T • Ring Planet Grid</title>

    <style>
      html, body {
        margin: 0; padding: 0;
        width: 100%; height: 100%;
        overflow: hidden;
        background: radial-gradient(circle at center, #020208, #000000);
      }
      canvas { display: block; }

      .hint {
        position: fixed;
        bottom: 10px; left: 50%;
        transform: translateX(-50%);
        font-family: system-ui;
        font-size: 11px;
        opacity: 0.55;
        color: #fff;
        pointer-events: none;
      }
    </style>
  </head>
  <body>

    <div class="hint">
      1 prst = otáčení • 2 prsty = posun • štípnutí = zoom
    </div>

    <!-- Three.js – NON-MODULE (funguje 100% všude) -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

    <script>
      // ─────────────────────────────────────
      // SCÉNA
      // ─────────────────────────────────────
      const scene = new THREE.Scene();

      const camera = new THREE.PerspectiveCamera(
        50,
        window.innerWidth / window.innerHeight,
        0.1,
        200
      );

      // Kamera dál -> planeta bude vždy vidět
      camera.position.set(0, 3.2, 8);

      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      document.body.appendChild(renderer.domElement);

      // ─────────────────────────────────────
      // SVĚTLA – silná, aby objekt nikdy nezmizel
      // ─────────────────────────────────────
      scene.add(new THREE.AmbientLight(0xffffff, 0.55));

      const dir1 = new THREE.DirectionalLight(0xffe6b0, 1.25);
      dir1.position.set(5, 5, 5);
      scene.add(dir1);

      const dir2 = new THREE.DirectionalLight(0xffc878, 0.6);
      dir2.position.set(-5, -3, -2);
      scene.add(dir2);

      // ─────────────────────────────────────
      // RING PLANETA
      // ─────────────────────────────────────
      const planet = new THREE.Group();
      scene.add(planet);

      const outerRadius = 2.2;
      const tubeRadius = 0.55;

      const geometry = new THREE.TorusGeometry(
        outerRadius,
        tubeRadius,
        48,
        96
      );

      // ČERNÉ TĚLO PLANETY
      const blackMat = new THREE.MeshStandardMaterial({
        color: 0x000000,
        metalness: 0.6,
        roughness: 0.25,
        emissive: 0x070707
      });

      const inner = new THREE.Mesh(geometry, blackMat);
      inner.scale.set(1, 0.65, 1);
      planet.add(inner);

      // ZLATÁ MŘÍŽKA
      const goldGrid = new THREE.MeshBasicMaterial({
        color: 0xffd27a,
        wireframe: true
      });

      const grid = new THREE.Mesh(geometry, goldGrid);
      grid.scale.set(1.005, 0.66, 1.005);
      planet.add(grid);

      // Náklon (podle tvé skici)
      planet.rotation.x = 0.55;
      planet.rotation.z = 0.15;

      // ─────────────────────────────────────
      // OVLÁDÁNÍ – plné manipulace
      // ─────────────────────────────────────
      const controls = new THREE.OrbitControls(camera, renderer.domElement);

      controls.enableDamping = true;
      controls.dampingFactor = 0.07;

      controls.enableRotate = true;
      controls.enablePan = true;
      controls.enableZoom = true;

      controls.minDistance = 3;
      controls.maxDistance = 15;

      controls.autoRotate = true;
      controls.autoRotateSpeed = 0.4;

      // ─────────────────────────────────────
      // ANIMACE
      // ─────────────────────────────────────
      function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
      }

      animate();

      // ─────────────────────────────────────
      // RESPONSIVITA
      // ─────────────────────────────────────
      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>

  </body>
</html>
