<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>VaF'i'T • Ring Planet Grid</title>

    <style>
      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: radial-gradient(circle at top, #050815, #020208);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: #f5f5f5;
      }

      #app {
        position: fixed;
        inset: 0;
      }

      canvas {
        display: block;
        width: 100%;
        height: 100%;
      }

      .hud {
        position: fixed;
        left: 12px;
        top: 12px;
        padding: 8px 12px;
        background: rgba(5, 8, 20, 0.82);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        max-width: min(80vw, 320px);
        font-size: 12px;
        line-height: 1.4;
      }

      .hud strong {
        font-size: 13px;
      }

      .hud-bottom {
        position: fixed;
        right: 12px;
        bottom: 12px;
        padding: 6px 10px;
        font-size: 11px;
        background: rgba(5, 8, 20, 0.82);
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        opacity: 0.8;
      }
    </style>

    <!-- THREE.JS + ORBIT CONTROLS -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
  </head>

  <body>
    <div id="app"></div>

    <div class="hud">
      <strong>Ring Planet Grid</strong><br />
      • prsty otáčej scénu<br />
      • dvěma prsty přibližuj / oddaluj<br />
      • planeta = koule + prstenec<br />
      • mřížka = prostor pro další světy
    </div>

    <div class="hud-bottom">
      ً&’」 • Vivere atque FruiT • RingPlanetGrid
    </div>

    <script>
      // ZÁKLAD SCÉNY
      const app = document.getElementById("app");
      const scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2(0x020208, 0.04);

      const camera = new THREE.PerspectiveCamera(
        60,
        window.innerWidth / window.innerHeight,
        0.1,
        200
      );
      camera.position.set(10, 10, 16);

      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setPixelRatio(window.devicePixelRatio || 1);
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.outputEncoding = THREE.sRGBEncoding;
      app.appendChild(renderer.domElement);

      // SVĚTLO
      const ambient = new THREE.AmbientLight(0xffffff, 0.6);
      scene.add(ambient);

      const dirLight = new THREE.DirectionalLight(0xffffff, 1.1);
      dirLight.position.set(10, 18, 8);
      scene.add(dirLight);

      // MŘÍŽKA – PODLAHA
      const grid = new THREE.GridHelper(40, 40, 0x7f7fff, 0x222244);
      grid.position.y = -3;
      scene.add(grid);

      // MALÉ BODY NA MŘÍŽCE – NODy
      const nodeGeom = new THREE.SphereGeometry(0.08, 10, 10);
      const nodeMat = new THREE.MeshBasicMaterial({ color: 0x7f9dff });
      const nodes = new THREE.Group();
      for (let x = -4; x <= 4; x += 2) {
        for (let z = -4; z <= 4; z += 2) {
          const n = new THREE.Mesh(nodeGeom, nodeMat);
          n.position.set(x, -2.95, z);
          nodes.add(n);
        }
      }
      scene.add(nodes);

      // PLANETA (KOULE)
      const planetGeom = new THREE.SphereGeometry(3, 64, 64);
      const planetMat = new THREE.MeshStandardMaterial({
        color: 0x4f8cff,
        metalness: 0.3,
        roughness: 0.35,
        emissive: 0x111133,
        emissiveIntensity: 0.6,
      });
      const planet = new THREE.Mesh(planetGeom, planetMat);
      planet.position.set(0, 1, 0);
      scene.add(planet);

      // TEXTURA "PÁSŮ" NA PLANETĚ – jemný noise
      const ringBandGeom = new THREE.TorusGeometry(3.01, 0.12, 2, 80);
      const ringBandMat = new THREE.MeshBasicMaterial({
        color: 0xaad4ff,
        transparent: true,
        opacity: 0.35,
      });
      const ringBand = new THREE.Mesh(ringBandGeom, ringBandMat);
      ringBand.rotation.x = Math.PI / 2.3;
      planet.add(ringBand);

      // PRSTENEC KOLEM PLANETY
      const ringGeom = new THREE.TorusGeometry(5.2, 0.4, 18, 120);
      const ringMat = new THREE.MeshStandardMaterial({
        color: 0xf5f0ff,
        metalness: 0.9,
        roughness: 0.15,
        emissive: 0x5555ff,
        emissiveIntensity: 0.4,
        side: THREE.DoubleSide,
      });
      const ring = new THREE.Mesh(ringGeom, ringMat);
      ring.rotation.x = Math.PI / 2.3;
      scene.add(ring);

      // drobný "orbit" bod na prstenci
      const orbGeom = new THREE.SphereGeometry(0.35, 16, 16);
      const orbMat = new THREE.MeshStandardMaterial({
        color: 0xffdd88,
        emissive: 0xffcc66,
        emissiveIntensity: 0.9,
      });
      const orb = new THREE.Mesh(orbGeom, orbMat);
      orb.position.set(5.2, 0, 0);
      ring.add(orb);

      // ORBIT CONTROLS – plná manipulace
      const controls = new THREE.OrbitControls(
        camera,
        renderer.domElement
      );
      controls.enableDamping = true;
      controls.dampingFactor = 0.06;
      controls.minDistance = 6;
      controls.maxDistance = 40;
      controls.enablePan = true;
      controls.target.set(0, 0, 0);
      controls.update();

      // RESIZE
      window.addEventListener("resize", () => {
        const w = window.innerWidth;
        const h = window.innerHeight;
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
        renderer.setSize(w, h);
      });

      // ANIMACE
      let t = 0;
      function animate() {
        requestAnimationFrame(animate);
        t += 0.005;

        planet.rotation.y += 0.0035;
        ring.rotation.z = Math.sin(t * 0.6) * 0.12;
        orb.rotation.y += 0.03;
        nodes.rotation.y += 0.0008;

        controls.update();
        renderer.render(scene, camera);
      }

      animate();
    </script>
  </body>
</html>
