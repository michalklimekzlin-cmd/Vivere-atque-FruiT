<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VaFT • Glyph Sphere</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      overflow: hidden;
      background: radial-gradient(circle at center, #120507, #020103);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }
    canvas {
      position: fixed;
      inset: 0;
      display: block;
    }
  </style>
</head>
<body>

<canvas id="sphere"></canvas>

<script>
(function () {
  "use strict";

  const canvas = document.getElementById("sphere");
  const ctx = canvas.getContext("2d");

  function resize() {
    const dpr = window.devicePixelRatio || 1;
    const w = window.innerWidth;
    const h = window.innerHeight;

    canvas.width = w * dpr;
    canvas.height = h * dpr;

    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  resize();
  window.addEventListener("resize", resize);

  // Tvůj 4×4 věneček symbolů
  const glyphs = [
    "ː","¦","∙","!",
    "a","b","c","^",
    "1","2","3","4",
    "#",".","A",")"
  ];

  const latSteps = 20;       // optimalizace pro iPad
  const lonSteps = 36;       // rovnoměrné rozmístění
  let rotation = 0;
  let lastTime = 0;

  function loop(t) {

    const dt = lastTime ? (t - lastTime) : 16;
    lastTime = t;
    rotation += dt * 0.0005;            // plynulost rotace

    const w = window.innerWidth;
    const h = window.innerHeight;
    const cx = w / 2;
    const cy = h / 2;

    // přesný radius pro iPad Air (4:3)
    const radius = Math.min(w, h) * 0.32;

    ctx.clearRect(0, 0, w, h);

    for (let i = 0; i <= latSteps; i++) {
      const v = i / latSteps;
      const lat = (v - 0.5) * Math.PI;

      for (let j = 0; j < lonSteps; j++) {

        const u = j / lonSteps;
        const lon = (u * Math.PI * 2) + rotation;

        const x = Math.cos(lat) * Math.cos(lon);
        const y = Math.sin(lat);
        const z = Math.cos(lat) * Math.sin(lon);

        const depth = (z + 1) / 2;

        if (depth < 0.2) continue;      // zadní strana nevidět

        const px = cx + x * radius;
        const py = cy + y * radius;

        const size = 1.3 + depth * 2.1;

        ctx.beginPath();
        ctx.arc(px, py, size, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(${255 * (0.8 + depth * 0.2)},${180 + depth * 40},${180 + depth * 40},${0.65 + depth * 0.3})`;
        ctx.fill();

        if (depth > 0.55 && (i + j) % 3 === 0) {
          const glyph = glyphs[(i * lonSteps + j) % glyphs.length];

          ctx.save();
          ctx.translate(px, py);
          ctx.font = `${7 + depth * 3.5}px monospace`;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillStyle = depth > 0.75 ? "rgba(255,255,255,0.95)" : "rgba(255,210,210,0.9)";
          ctx.fillText(glyph, 0, 0);
          ctx.restore();
        }
      }
    }

    requestAnimationFrame(loop);
  }

  requestAnimationFrame(loop);
})();
</script>

</body>
</html>
